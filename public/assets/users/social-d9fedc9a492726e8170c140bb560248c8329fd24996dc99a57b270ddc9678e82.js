(function(){var e;$(document).ready(function(){return $("#peopleModal").on("show.bs.modal",function(n){var t,o,a,l;return t=$(n.relatedTarget),l=t.data("title"),o=$("input[name=followed_id]").val(),a=$(this),a.find(".modal-title").text(l),"Followers"===l?Social.getConnectedPeople(API.getFollowerUrl().format(o),e):Social.getConnectedPeople(API.getFollowingUrl().format(o),e)}),$(".connected-people").on("click",".follow",event,function(){var e,n,t;return n=$(this).parent().data("id"),t=API.getRelationshipsUrl(!0).format(n),e=$(this).parent(),Relationship.editRelationship("POST",t).done(function(n){return e.find(".follow").remove(),e.append(n)}).fail(function(e){return console.log(e),alert("Something bad happened")})}),$(".connected-people").on("click",".unfollow",event,function(){var e,n,t;return n=$(this).parent().data("id"),t=API.getRelationshipsUrl().format(n),e=$(this).parent(),Relationship.editRelationship("DELETE",t).done(function(n){return e.find(".unfollow").remove(),e.append(n)}).fail(function(e){return console.log(e),alert("Something bad happened")})})}),e=function(e){return $(".connected-people").empty(),$.each(e,function(e,n){var t,o;return o="",o=n.following?"<button class='btn btn-success unfollow'>Unfollow</button>":"<button class='btn btn-warning follow'>Follow</button>",t="<div class='clearfix'> <img src="+n.avatar+" /> <a href='/"+n.username+"'>"+n.username+"</a> </div>",$(t).find("div").append(o),$(".connected-people").append($("<div class='clearfix' data-id="+n.id+">").append($("<img src="+n.avatar+" />")).append($("<a href='/"+n.username+"'>").append(""+n.username)).append(User.getId()&&n.id!==User.getId()?$(o):void 0))})},this.Social={},Social.getConnectedPeople=function(e,n){return $.ajax({url:e,success:n,error:function(){return alert("Opps! Please try again.")}})}}).call(this);